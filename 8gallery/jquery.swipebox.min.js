(function(d,l,a,k){a.swipebox=function(m,y){var g,z={useCSS:!0,useSVG:!0,initialIndexOnArray:0,hideCloseButtonOnMobile:!1,hideBarsDelay:3E3,videoMaxWidth:1140,vimeoColor:"cccccc",beforeOpen:null,afterOpen:null,afterClose:null,loopAtEnd:!1,autoplayVideos:!1},f=this,h=[],p,q=m.selector,A=a(q),v=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i),w=null!==v||l.createTouch!==k||"ontouchstart"in d||"onmsgesturechange"in d||
navigator.msMaxTouchPoints,B=!!l.createElementNS&&!!l.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,u=d.innerWidth?d.innerWidth:a(d).width(),x=d.innerHeight?d.innerHeight:a(d).height(),n=0;f.settings={};a.swipebox.close=function(){g.closeSlide()};a.swipebox.extend=function(){return g};f.init=function(){f.settings=a.extend({},z,y);if(a.isArray(m))h=m,g.target=a(d),g.init(f.settings.initialIndexOnArray);else a(l).on("click",q,function(b){if("slide current"===b.target.parentNode.className)return!1;
a.isArray(m)||(g.destroy(),p=a(q),g.actions());h=[];var c,e;e||(c="data-rel",e=a(this).attr(c));e||(c="rel",e=a(this).attr(c));p=e&&""!==e&&"nofollow"!==e?A.filter("["+c+'="'+e+'"]'):a(q);p.each(function(){var b=null,c=null;a(this).attr("title")&&(b=a(this).attr("title"));a(this).attr("href")&&(c=a(this).attr("href"));h.push({href:c,title:b})});c=p.index(a(this));b.preventDefault();b.stopPropagation();g.target=a(b.target);g.init(c)})};g={init:function(b){f.settings.beforeOpen&&f.settings.beforeOpen();
this.target.trigger("swipebox-start");a.swipebox.isOpen=!0;this.build();this.openSlide(b);this.openMedia(b);this.preloadMedia(b+1);this.preloadMedia(b-1);f.settings.afterOpen&&f.settings.afterOpen()},build:function(){var b;a("body").append('<div id="swipebox-overlay">\t\t\t\t\t<div id="swipebox-container">\t\t\t\t\t\t<div id="swipebox-slider"></div>\t\t\t\t\t\t<div id="swipebox-top-bar">\t\t\t\t\t\t\t<div id="swipebox-title"></div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div id="swipebox-bottom-bar">\t\t\t\t\t\t\t<div id="swipebox-arrows">\t\t\t\t\t\t\t\t<a id="swipebox-prev"></a>\t\t\t\t\t\t\t\t<a id="swipebox-next"></a>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<a id="swipebox-close"></a>\t\t\t\t\t</div>\t\t\t</div>');
B&&!0===f.settings.useSVG&&(b=a("#swipebox-close").css("background-image"),b=b.replace("png","svg"),a("#swipebox-prev, #swipebox-next, #swipebox-close").css({"background-image":b}));v&&a("#swipebox-bottom-bar, #swipebox-top-bar").remove();a.each(h,function(){a("#swipebox-slider").append('<div class="slide"></div>')});this.setDim();this.actions();w&&this.gesture();this.keyboard();this.animBars();this.resize()},setDim:function(){var b,c,e={};"onorientationchange"in d?d.addEventListener("orientationchange",
function(){if(0===d.orientation)b=u,c=x;else if(90===d.orientation||-90===d.orientation)b=x,c=u},!1):(b=d.innerWidth?d.innerWidth:a(d).width(),c=d.innerHeight?d.innerHeight:a(d).height());e={width:b,height:c};a("#swipebox-overlay").css(e)},resize:function(){var b=this;a(d).resize(function(){b.setDim()}).resize()},supportTransition:function(){var b="transition WebkitTransition MozTransition OTransition msTransition KhtmlTransition".split(" "),a;for(a=0;a<b.length;a++)if(l.createElement("div").style[b[a]]!==
k)return b[a];return!1},doCssTrans:function(){if(f.settings.useCSS&&this.supportTransition())return!0},gesture:function(){var b=this,c,e,d,f,m,g,k=!1,s=!1,l,p,t={},q=a("#swipebox-top-bar, #swipebox-bottom-bar"),r=a("#swipebox-slider");q.addClass("visible-bars");b.setTimeout();a("body").bind("touchstart",function(b){a(this).addClass("touching");c=a("#swipebox-slider .slide").index(a("#swipebox-slider .slide.current"));t=b.originalEvent.targetTouches[0];l=b.originalEvent.targetTouches[0].pageX;p=b.originalEvent.targetTouches[0].pageY;
a("#swipebox-slider").css({"-webkit-transform":"translate3d("+n+"%, 0, 0)",transform:"translate3d("+n+"%, 0, 0)"});a(".touching").bind("touchmove",function(b){b.preventDefault();b.stopPropagation();t=b.originalEvent.targetTouches[0];!s&&(m=d,d=t.pageY-p,50<=Math.abs(d)||k)&&(b=0.75-Math.abs(d)/r.height(),r.css({top:d+"px"}),r.css({opacity:b}),k=!0);f=e;e=t.pageX-l;g=100*e/u;!s&&(!k&&10<=Math.abs(e))&&(a("#swipebox-slider").css({"-webkit-transition":"",transition:""}),s=!0);s&&(0<e?0===c?a("#swipebox-overlay").addClass("leftSpringTouch"):
(a("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch"),a("#swipebox-slider").css({"-webkit-transform":"translate3d("+(n+g)+"%, 0, 0)",transform:"translate3d("+(n+g)+"%, 0, 0)"})):0>e&&(h.length===c+1?a("#swipebox-overlay").addClass("rightSpringTouch"):(a("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch"),a("#swipebox-slider").css({"-webkit-transform":"translate3d("+(n+g)+"%, 0, 0)",transform:"translate3d("+(n+g)+"%, 0, 0)"}))))});return!1}).bind("touchend",
function(c){c.preventDefault();c.stopPropagation();a("#swipebox-slider").css({"-webkit-transition":"-webkit-transform 0.4s ease",transition:"transform 0.4s ease"});d=t.pageY-p;e=t.pageX-l;g=100*e/u;k?(k=!1,100<=Math.abs(d)&&Math.abs(d)>Math.abs(m)?(c=0<d?r.height():-r.height(),r.animate({top:c+"px",opacity:0},300,function(){b.closeSlide()})):r.animate({top:0,opacity:1},300)):s?(s=!1,10<=e&&e>=f?b.getPrev():-10>=e&&e<=f&&b.getNext()):q.hasClass("visible-bars")?(b.clearTimeout(),b.hideBars()):(b.showBars(),
b.setTimeout());a("#swipebox-slider").css({"-webkit-transform":"translate3d("+n+"%, 0, 0)",transform:"translate3d("+n+"%, 0, 0)"});a("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch");a(".touching").off("touchmove").removeClass("touching")})},setTimeout:function(){if(0<f.settings.hideBarsDelay){var b=this;b.clearTimeout();b.timeout=d.setTimeout(function(){b.hideBars()},f.settings.hideBarsDelay)}},clearTimeout:function(){d.clearTimeout(this.timeout);this.timeout=null},
showBars:function(){var b=a("#swipebox-top-bar, #swipebox-bottom-bar");this.doCssTrans()?b.addClass("visible-bars"):(a("#swipebox-top-bar").animate({top:0},500),a("#swipebox-bottom-bar").animate({bottom:0},500),setTimeout(function(){b.addClass("visible-bars")},1E3))},hideBars:function(){var b=a("#swipebox-top-bar, #swipebox-bottom-bar");this.doCssTrans()?b.removeClass("visible-bars"):(a("#swipebox-top-bar").animate({top:"-50px"},500),a("#swipebox-bottom-bar").animate({bottom:"-50px"},500),setTimeout(function(){b.removeClass("visible-bars")},
1E3))},animBars:function(){var b=this,c=a("#swipebox-top-bar, #swipebox-bottom-bar");c.addClass("visible-bars");b.setTimeout();a("#swipebox-slider").click(function(){c.hasClass("visible-bars")||(b.showBars(),b.setTimeout())});a("#swipebox-bottom-bar").hover(function(){b.showBars();c.addClass("visible-bars");b.clearTimeout()},function(){0<f.settings.hideBarsDelay&&(c.removeClass("visible-bars"),b.setTimeout())})},keyboard:function(){var b=this;a(d).bind("keyup",function(a){a.preventDefault();a.stopPropagation();
37===a.keyCode?b.getPrev():39===a.keyCode?b.getNext():27===a.keyCode&&b.closeSlide()})},actions:function(){var b=this;2>h.length?(a("#swipebox-bottom-bar").hide(),k===h[1]&&a("#swipebox-top-bar").hide()):(a("#swipebox-prev").bind("touchend click",function(a){a.preventDefault();a.stopPropagation();b.getPrev();b.setTimeout()}),a("#swipebox-next").bind("touchend click",function(a){a.preventDefault();a.stopPropagation();b.getNext();b.setTimeout()}));a("#swipebox-close").bind("touchend click",function(){b.closeSlide()})},
setSlide:function(b,c){c=c||!1;var e=a("#swipebox-slider");n=100*-b;this.doCssTrans()?e.css({"-webkit-transform":"translate3d("+100*-b+"%, 0, 0)",transform:"translate3d("+100*-b+"%, 0, 0)"}):e.animate({left:100*-b+"%"});a("#swipebox-slider .slide").removeClass("current");a("#swipebox-slider .slide").eq(b).addClass("current");this.setTitle(b);c&&e.fadeIn();a("#swipebox-prev, #swipebox-next").removeClass("disabled");0===b?a("#swipebox-prev").addClass("disabled"):b===h.length-1&&!0!==f.settings.loopAtEnd&&
a("#swipebox-next").addClass("disabled");setTimeout(function(){a("#swipebox-slider .slide").not(".current").find(".swipebox-video-html5").each(function(){this.pause()});a("#swipebox-slider .slide.current").find(".swipebox-video-html5")[0].play()},0)},openSlide:function(b){a("html").addClass("swipebox-html");w?(a("html").addClass("swipebox-touch"),f.settings.hideCloseButtonOnMobile&&a("html").addClass("swipebox-no-close-button")):a("html").addClass("swipebox-no-touch");a(d).trigger("resize");this.setSlide(b,
!0)},preloadMedia:function(a){var c=this,e=null;h[a]!==k&&(e=h[a].href);c.isVideo(e)?c.openMedia(a):setTimeout(function(){c.openMedia(a)},1E3)},openMedia:function(b){var c,e;h[b]!==k&&(c=h[b].href);if(0>b||b>=h.length)return!1;e=a("#swipebox-slider .slide").eq(b);this.isVideo(c)?e.html(this.getVideo(c)):(e.addClass("slide-loading"),this.loadMedia(c,function(){e.removeClass("slide-loading");e.html(this)}))},setTitle:function(b){var c=null;a("#swipebox-title").empty();h[b]!==k&&(c=h[b].title);c?(a("#swipebox-top-bar").show(),
a("#swipebox-title").append(c)):a("#swipebox-top-bar").hide()},isVideo:function(a){if(a&&(a.match(/youtube\.com\/watch\?v=([a-zA-Z0-9\-_]+)/)||(a.match(/vimeo\.com\/([0-9]*)/)||a.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/))||0<=a.toLowerCase().indexOf("swipeboxvideo=1")))return!0},getVideo:function(a){var c="",e=a.match(/watch\?v=([a-zA-Z0-9\-_]+)/),d=a.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/),g=a.match(/vimeo\.com\/([0-9]*)/);e||d?(d&&(e=d),c='<iframe width="560" height="315" src="//www.youtube.com/embed/'+
e[1]+"?autoplay="+f.settings.autoplayVideos+'" frameborder="0" allowfullscreen></iframe>'):g&&(c='<iframe width="560" height="315"  src="//player.vimeo.com/video/'+g[1]+"?byline=0&amp;portrait=0&amp;color="+f.settings.vimeoColor+"&autoplay="+f.settings.autoplayVideos+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>');e||(d||g)||(c='<video class="swipebox-video-html5" controls loop preload="none"><source src="'+a+'" autostart="false">Your browser doesn\'t support HTML5 video.</video>');
return'<div class="swipebox-video-container" style="max-width:'+f.settings.videomaxWidth+'px"><div class="swipebox-video">'+c+"</div></div>"},loadMedia:function(b,c){if(!this.isVideo(b)){var e=a("<img>").on("load",function(){c.call(e)});e.attr("src",b)}},getNext:function(){var b,c=a("#swipebox-slider .slide").index(a("#swipebox-slider .slide.current"));c+1<h.length?(b=a("#swipebox-slider .slide").eq(c).contents().find("iframe").attr("src"),a("#swipebox-slider .slide").eq(c).contents().find("iframe").attr("src",
b),c++,this.setSlide(c),this.preloadMedia(c+1)):!0===f.settings.loopAtEnd?(b=a("#swipebox-slider .slide").eq(c).contents().find("iframe").attr("src"),a("#swipebox-slider .slide").eq(c).contents().find("iframe").attr("src",b),c=0,this.preloadMedia(c),this.setSlide(c),this.preloadMedia(c+1)):(a("#swipebox-overlay").addClass("rightSpring"),setTimeout(function(){a("#swipebox-overlay").removeClass("rightSpring")},500))},getPrev:function(){var b=a("#swipebox-slider .slide").index(a("#swipebox-slider .slide.current")),
c;0<b?(c=a("#swipebox-slider .slide").eq(b).contents().find("iframe").attr("src"),a("#swipebox-slider .slide").eq(b).contents().find("iframe").attr("src",c),b--,this.setSlide(b),this.preloadMedia(b-1)):(a("#swipebox-overlay").addClass("leftSpring"),setTimeout(function(){a("#swipebox-overlay").removeClass("leftSpring")},500))},closeSlide:function(){a("html").removeClass("swipebox-html");a("html").removeClass("swipebox-touch");a(d).trigger("resize");this.destroy()},destroy:function(){a(d).unbind("keyup");
a("body").unbind("touchstart");a("body").unbind("touchmove");a("body").unbind("touchend");a("#swipebox-slider").unbind();a("#swipebox-overlay").remove();a.isArray(m)||m.removeData("_swipebox");this.target&&this.target.trigger("swipebox-destroy");a.swipebox.isOpen=!1;f.settings.afterClose&&f.settings.afterClose()}};f.init()};a.fn.swipebox=function(d){a.data(this,"_swipebox")||(d=new a.swipebox(this,d),this.data("_swipebox",d));return this.data("_swipebox")}})(window,document,jQuery);
